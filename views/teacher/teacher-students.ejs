<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/creator-dashboard.css">

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <title>Kleva </title>
</head>

<body>
    <!-- Dashboard Container -->
    <div class="">
        <!-- Navigation Bar -->
        <header class="header">
            <!-- Logo -->
            <a href="/">
              <img src="img/logo.png" alt="Kleva" class="logo">
            </a>
            <!-- Search Bar -->
            <form action="/" class="search" method="POST">
                <input type="text" class="search__input" placeholder="Search Games">
                <button class="search__button">
                    <svg class="search__icon">
                        <use xlink:href="img/symbol-defs.svg#icon-search"></use>
                    </svg>
                </button>
            </form>

            <!-- Mobile Menu  -->
            <div class="mobile-navigation">
                <input type="checkbox" class="mobile-navigation__checkbox" id="menu_burger">

                <label for="menu_burger" class="mobile-navigation__button">
                    <svg class="mobile-navigation__button-icon">
                        <use xlink:href="img/symbol-defs.svg#icon-menu"></use>
                    </svg>
                </label>

                <div class="mobile-navigation__background"></div>

                <nav class="mobile-navigation__nav">
                    <ul class="mobile-navigation__list">
                        <li class="mobile-navigation__item">
                            <a href="" class="mobile-navigation__link">Home</a>
                        </li>
                        <li class="mobile-navigation__item">
                            <a href="" class="mobile-navigation__link">Log Out</a>
                        </li>
                        <li class="mobile-navigation__item">
                            <a href="" class="mobile-navigation__link">Games</a>
                        </li>
                        <li class="mobile-navigation__item">
                            <a href="" class="mobile-navigation__link">Help</a>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Desktop and Tablet Menu -->
            <nav class="user-nav">
                <div class="user-nav__icon-box">
                    <a href="/">
                        <svg class="user-nav__icon">
                            <use xlink:href="img/symbol-defs.svg#icon-home"></use>
                        </svg>
                    </a>
                </div>
                <div class="user-nav__icon-box">
                    <form action="/sign-out" method="POST">
                        <button type="submit" style="border: none; background-color: transparent; ">
                            <svg class="user-nav__icon">
                                <use xlink:href="img/symbol-defs.svg#icon-exit"></use>
                            </svg>
                        </button>
                    </form>
                </div>
                <div class="user-nav__user">
                    <img src="img/profile.png" alt="User Photo" class="user-nav__user-photo">
                    <span class="user-name">Bobby</span>
                </div>
            </nav>
        </header>


        <div class="content">
            <!-- Dashboard Side Bar -->
            <nav class="side-bar">
                <!-- Dashboard Pages -->
                <ul class="side-nav">
                    <!-- Active Styling with Plain JS Logic -->
                    <li class="<%= path === '/your-apps' ? 'side-nav__item--active' : 'side-nav__item'; %>">
                        <a href="/teacher-game-storepage/?page=1" class="side-nav__link">
                          <svg class="side-nav__icon">
                            <use xlink:href="../img/symbol-defs.svg#icon-click"></use>
                          </svg>
                          <span>Add Games</span>
                        </a>
                    </li>
                    <li class="<%= path === '/teacher-dashboard' ? 'side-nav__item--active' : 'side-nav__item' %> ">
                        <a href="/teacher-dashboard" class="side-nav__link">
                            <!-- Sidebar Icon -->
                            <svg class="side-nav__icon">
                                <use xlink:href="img/symbol-defs.svg#icon-box-remove"></use>
                            </svg>
                            <span class="sideBarCustom">Classroom</span>
                        </a>
                    </li>
                    <li class="side-nav__item">
                        <a href="/teacher-schedule" class="side-nav__link">
                          <!-- Sidebar Icon -->
                          <svg class="side-nav__icon">
                            <use xlink:href="../img/symbol-defs.svg#calendar"></use>
                          </svg>
                          <span>Schedule Calendar</span>
                        </a>
                      </li>
                    <li class="<%= path === '/teacher-students' ? 'side-nav__item--active' : 'side-nav__item' %> ">
                        <a href="/" class="side-nav__link">
                            <svg class="side-nav__icon">
                                <use xlink:href="img/symbol-defs.svg#icon-user-check"></use>
                            </svg>
                            <span class="sideBarCustom">Statistics</span>
                        </a>
                    </li>
                    <li class="<%= path === '/drawing-history' ? 'side-nav__item--active' : 'side-nav__item' %> ">
                        <a href="/drawing-history" class="side-nav__link">
                            <svg class="side-nav__icon">
                                <use xlink:href="img/symbol-defs.svg#icon-pencil2"></use>
                            </svg>
                            <span class="sideBarCustom">Doodles</span>
                        </a>
                    </li>
                    <li class="<%= path === '/help' ? 'side-nav__item--active' : 'side-nav__item' %> ">
                        <a href="/" class="side-nav__link">
                            <svg class="side-nav__icon">
                                <use xlink:href="img/symbol-defs.svg#icon-lifebuoy"></use>
                            </svg>
                            <span class="sideBarCustom">Help</span>
                        </a>
                    </li>
                </ul>
                <!-- Legal Text -->
                <div class="legal">
                    &copy; 2020 by Kleva Pty. Ltd.
                </div>
            </nav>

            <div class="container-fluid pr-0 pl-0 py-5">
                <div class="px-5 py-5">
                    <div class="ml-5 mr-5 container-lg mx-auto">
                        <div class="row justify-content-center">
                            <div class="col-12">
                                <h1 class="dashboardHeaders">Statistics Dashboard</h1>
                            </div>

                            <!-- Statistics (Avg.Game Activity - Number of Students) -->

                            <% if(classrooms.length > 0) { %>
                            <% for (let classRoom of classrooms) { %>
                            <div class="col-12 col-lg-12 mt-5">
                                <div class="card shadow mb-4" style="border-radius: 3rem;">
                                    <!-- Card Header - Dropdown -->
                                    <div class=" card-header px-5 py-5 d-flex flex-row align-items-center
                                    justify-content-between"
                                        style="border-radius: 3rem 3rem 0 0; background-color: transparent;">
                                        <h6 class="teacherClassroomCardHeader"
                                            style="font-size: 3rem; color:darkslateblue">
                                            <%- classRoom.title %>
                                        </h6>
                                        <div class="dropdown no-arrow">
                                            <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                aria-labelledby="dropdownMenuLink">
                                                <div class="dropdown-header">Generate Report</div>
                                                <a class="dropdown-item" href="#">Mail Head of Department</a>

                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item" href="#">Open Full Report</a>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Card Body -->
                                    <div class="card-body">
                                        <table class="table table-borderless"
                                            style="overflow: hidden; table-layout:fixed;">
                                            <thead class="teacherClassroomCardHeader" style="font-size:1.6rem;">
                                                <tr>
                                                    <th scope="col" style="width: 40%">Game Name</th>
                                                    <th scope="col" style="white-space: nowrap" data-toggle="tooltip"
                                                        data-placement="top" title="Tracks how long students have played the game.
                                                        If they tab away, go idle the tracker stops.">
                                                        Student Engagement
                                                    </th>
                                                    <th scope="col" style="width: 15%">Visits</th>
                                                    <th scope="col" style="width: 15%">Category</th>

                                                </tr>
                                            </thead>
                                            <tbody>

                                                <% if(games.length > 0) { %>
                                                <% for (let game of games) { %>
                                                <tr>

                                                    <% if(game.dataValues.classroomClassCode === classRoom.classCode) { %>



                                                    <th scope="row" class="d-flex align-self-center">
                                                        <img class="dot mr-3"
                                                            src="<%- game.dataValues.game.gameImageURL %>" />
                                                        <span
                                                            class="d-flex align-self-center teacherClassroomCardHeader"
                                                            style="font-size: 1.8rem; letter-spacing: .03rem;"><%- game.dataValues.game.title %></span>
                                                    </th>
                                                    <td class="pt-4 teacherClassroomCardYear"
                                                        style="font-size: 1.7rem; letter-spacing: .03rem; ">
                                                        <%- Math.ceil(game.dataValues.AverageStudentActivity/60) %>
                                                        Minutes</td>
                                                    <td class="pt-4 teacherClassroomCardYear"
                                                        style="font-size: 1.7rem; letter-spacing: .03rem; width: 100%; ">
                                                        <%- game.dataValues.studentVisits %></td>
                                                    <td class="pt-4 teacherClassroomCardYear"
                                                        style="font-size: 1.7rem; letter-spacing: .03rem; width: 100%; ">
                                                        <%- game.dataValues.game.category %></td>

                                                </tr>
                                                <% } %>

                                                <% } %>
                                                <% } %>

                                            </tbody>
                                        </table>
                                        <!-- <div class="chart-area">
                                                <canvas id="myAreaChart"></canvas>
                                            </div> -->
                                    </div>

                                </div>
                            </div>

                            <% } %>
                            <% }%>


                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>


</html>